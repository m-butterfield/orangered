{% extends 'base.html' %}

{% block body_content %}
<div id="root"></div>
{% endblock %}

{% block extra_js %}
<script>
window.subreddits = {{ subreddits | tojson }};
</script>
<script type="text/javascript" src="{{ url_for('static', filename='js/dist/bundle.js') }}"></script>

{% if not config['DEBUG'] %}
<script>
window.recaptchaSiteKey = '{{ recaptcha_site_key }}';
</script>
<script src="https://www.google.com/recaptcha/api.js?render={{ recaptcha_site_key }}"></script>
<script>
grecaptcha.ready(function() {
  grecaptcha.execute(recaptchaSiteKey, {action: 'homepage'}).then(function(token) {
    $('#captcha_input').val(token);
  });
  window.setInterval(function() {
    grecaptcha.execute(recaptchaSiteKey, {action: 'homepage'}).then(function(token) {
      $('#captcha_input').val(token);
    });
  }, 90000);
});
</script>
{% endif %}

{% endblock %}
