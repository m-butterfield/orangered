{% extends 'base.html' %}

{% block body_content %}

<!-- Navigation -->
<nav class="navbar navbar-expand-lg bg-secondary fixed-top text-uppercase" id="mainNav">
  <div class="container">
    <a class="navbar-brand js-scroll-trigger" href="{{ url_for('index') }}">orangered</a>
  </div>
</nav>

<!-- Header -->
<header class="masthead bg-primary text-white text-center" id="manage">
  <div class="container">
    <h2 class="text-uppercase mb-0">manage</h2>
    <hr class="star-light">
    <div class="row">
      <div class="col-lg-8 m-auto text-center">
        <p class="lead">select your subreddits.</p>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-4 mx-auto">
        <form id="manageForm" novalidate="novalidate">
          <div class="control-group">
            <div class="form-group floating-label-form-group controls mb-0 pb-2">
              <select class="selectpicker form-control"
                      id="subreddits"
                      multiple data-live-search="true"
                      data-max-options="10"
                      data-header="Choose subreddits (up to ten)"
                      title="Choose subreddits..."
                      required="required"
                      data-validation-required-message="Please choose at least one subreddit.">
                {% for subreddit in subreddits %}
                  <option{% if subreddit in user_subreddits %} selected="selected"{% endif %}>{{ subreddit }}</option>
                {% endfor %}
              </select>
              <p class="help-block text-danger"></p>
            </div>
          </div>
          <br>
          <div id="success"></div>
          <div class="form-group">
            <button type="submit" class="btn btn-primary btn-xl" id="manageButton">Save</button>
          </div>
        </form>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-8 m-auto text-center">
        <p class="lead">or</p>
        <p class="lead">click the button below to unsubscribe</p>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-8 mx-auto">
        <form action="{{ url_for('unsubscribe', uuid=account.uuid) }}" method="post">
          <input type="hidden" name="unsubscribe" value="{{ account.active }}">
          <div class="form-group">
            <button type="submit" class="btn btn-primary btn-xl">Unsubscribe</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</header>

{% endblock %}
{% block extra_js %}
<script src="{{ url_for('static', filename='js/manage.js', cache=cache_timestamp) }}"></script>
{% endblock %}
